# Gemini to Notion Knowledge Archiver

Google Gemini での会話（プロンプトと回答）を、まるごと Notion データベースにアーカイブ（保存）するための Chrome 拡張機能です。
以前は Twitter(X) への投稿機能がありましたが、現在は Notion への保存に特化しています。

## ✨ 特徴
- **スレッド全体の保存**: 会話の流れ（プロンプトと回答）をすべて抽出します。
- **AIによる要約**: 会話の内容を分析し、タイトル・概要・TODO・議事録を自動生成します（Gemini 自身のチャット機能を利用）。
- **プレビュー機能**: Notion に保存する前に、内容を編集・確認できます。
- **安心のセキュリティ**: API Key はお使いのブラウザ内にのみ保存され、外部サーバーには送信されません。

## 📦 インストール方法

本拡張機能は、Chrome ウェブストアには公開されていません。以下の手順で手動インストールしてください。

1. このリポジトリを `git clone` または ZIP ダウンロードして解凍します。
   ```bash
   git clone https://github.com/YOUR_USERNAME/gemini-to-notion.git
   ```
2. Chrome ブラウザで `chrome://extensions` を開きます。
3. 右上の「デベロッパーモード」を ON にします。
4. 「パッケージ化されていない拡張機能を読み込む」をクリックし、ダウンロードしたフォルダを選択します。

## ⚙️ 設定（初期セットアップ）

利用するには、Notion API トークンとデータベース ID の設定が必要です。

### 1. Notion インテグレーションの作成
1. [Notion My Integrations](https://www.notion.so/my-integrations) にアクセスします。
2. 「新しいインテグレーション」を作成します。
   - 名前: `Gemini Archiver` など（自由）
   - 種類: Internal（内部）
3. 発行された **Internal Integration Token** (`ntn_...`) をメモします。

### 2. 保存先データベースの準備
1. Notion で新しいデータベース（ページ）を作成します。
2. 作成したデータベースをブラウザで開き、右上の「・・・」メニューから「接続 (Connect to)」を選択します。
3. 作成したインテグレーション（例: Gemini Archiver）を追加して権限を与えます。
4. ブラウザの URL から **Database ID** を取得します。
   - `https://www.notion.so/myworkspace/`**`a8b4c...`**`?v=...`
   - `?v=` の手前にある 32桁の英数字部分です。

### 3. 拡張機能への設定
1. Chrome 拡張機能のアイコンをクリックし、設定（歯車マーク）を開きます。
2. **Notion API Key** と **Database ID** を入力して保存します。

## 🚀 使い方

1. [Google Gemini](https://gemini.google.com/) で会話を行います。
2. 会話が一段落したら、最後の回答の下にある「**✨ まとめて作成**」ボタンをクリックします。
3. 入力欄に自動的に「要約用プロンプト」が貼り付けられるので、そのまま送信（Enter）します。
4. Gemini が JSON 形式でまとめを作成してくれます。
5. 出力された回答の下にある「**📓 Notionへ保存**」ボタンをクリックします。
6. プレビュー画面が表示されるので、必要に応じて修正し「保存」を押します。

## 🛠️ 開発者向け情報

### ファイル構成
- `manifest.json`: 拡張機能の定義ファイル
- `content.js`: ページのDOM操作、プロンプト注入、JSONパース
- `background.js`: Notion API との通信（CORS対策のためバックグラウンドで実行）
- `options.html/js`: 設定画面

### 環境変数について
本プロジェクトは静的ファイルのみで構成されているため、ビルドプロセスはありません。
`.env` ファイルは使用しませんが、必要なキー情報は `.env.example` に記載しています。
※ API Key は各ユーザーがブラウザ上で設定する仕組みです。

## ⚠️ 免責事項
この拡張機能は非公式であり、Google および Notion とは関係ありません。自己責任でご利用ください。
